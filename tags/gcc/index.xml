<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Gcc on 평범한 개발자</title>
    <link>/tags/gcc/</link>
    <description>Recent content in Gcc on 평범한 개발자</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Fri, 24 Sep 2021 01:13:41 +0900</lastBuildDate>
    <atom:link href="/tags/gcc/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>커널의 KASAN 코드가 삽입되는 방법</title>
      <link>/posts/%EC%BB%A4%EB%84%90%EC%9D%98-kasan-%EC%BD%94%EB%93%9C%EA%B0%80-%EC%82%BD%EC%9E%85%EB%90%98%EB%8A%94-%EB%B0%A9%EB%B2%95/</link>
      <pubDate>Fri, 24 Sep 2021 01:13:41 +0900</pubDate>
      <guid>/posts/%EC%BB%A4%EB%84%90%EC%9D%98-kasan-%EC%BD%94%EB%93%9C%EA%B0%80-%EC%82%BD%EC%9E%85%EB%90%98%EB%8A%94-%EB%B0%A9%EB%B2%95/</guid>
      <description>&lt;h1 id=&#34;커널의-kasan-코드가-삽입되는-방법&#34;&gt;커널의 KASAN 코드가 삽입되는 방법&lt;/h1&gt;&#xA;&lt;p&gt;Generic KASAN 의 경우, 위와 같이 &lt;code&gt;__asan_load&lt;/code&gt;와 &lt;code&gt;__asan_store&lt;/code&gt; 함수가 정의되어&#xA;있다. 단순하게 KASAN의 사용법만 보았을 때, 과연 커널에서 어떻게 모든 메모리에&#xA;접근할 때마다 특정 함수의 내용을 실행할까 라는 궁금증이 생겼다. 커널 문서에&#xA;따르면, 컴파일러에 의해 위 함수들이 인라인 형태로 모든 메모리 접근 전에 삽입되어&#xA;해당 메모리가 안전한지 확인한다고 기술하고 있다. 이에 처음에는 &lt;code&gt;static inline&lt;/code&gt;&#xA;형태로 정의된 함수가 컴파일러에 의해 처리되는 것인가? 라고 생각했다. 하지만,&#xA;실제 코드를 보았을 때 함수와 &lt;code&gt;EXPORT_SYMBOL&lt;/code&gt; 이 사용된 것 외에는 그 어디에도&#xA;inline 키워드는 사용도지 않았다. 컴파일러가 해당 코드를 삽입한다고 하는데&#xA;정확하게 어떻게 삽입하는지, 해당 함수들의 이름이 바뀌면 어떤 결과가 나올지&#xA;궁금했다. 또한 커널 소스를 다 뒤져봐도 ASAN에 관련된 호출 부분을 아무리 찾아도&#xA;어떤 방식으로 &lt;code&gt;__asan_loadN&lt;/code&gt;, &lt;code&gt;__asan_storeN&lt;/code&gt; 이 메모리 접근 전에 삽입되는지&#xA;찾을 수 없었다.&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
