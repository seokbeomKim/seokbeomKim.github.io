<!DOCTYPE html>
<html lang="en-us">
  <head>
    <title>μ§€ν”Ό(Jiffies) | Sukbeom Kim</title>

    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">    
<meta name="viewport" content="width=device-width,minimum-scale=1">
<meta name="description" content="μ¤λλ§μ— μ§€ν”Όμ— λ€ν• ν¬μ¤ν…μ„ λ‹¤μ‹ μ‘μ„±ν•λ‹¤(λ€ν•™μƒ λ• μ»¤λ„ κ³µλ¶€λ¥Ό ν• λ’¤λ΅ μ΄λ ‡κ² λ³„λ„λ΅ λ¬Έμ„λ¥Ό μ‘μ„±ν•λ” κ²ƒμ€ μ²μμΈ κ²ƒ κ°™λ‹¤). μ „μ—­ λ³€μμΈ jiffiesμ—λ” μ‹">
<meta name="generator" content="Hugo 0.121.2">


  <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">


<link rel="stylesheet" href="/css/style.css">


  
    
    <link rel="stylesheet" href="https://seokbeomkim.github.iocss/img.css">
  

  
    
    <link rel="stylesheet" href="https://seokbeomkim.github.iocss/noto_sans_kr.css">
  

  
    
    <link rel="stylesheet" href="https://seokbeomkim.github.iocss/nanumgothic.css">
  


<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />

 
    
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'G-Y7VW74D2P3', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>




  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js" integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>




  </head>

  <body>
    <nav class="navigation">
	
		<a href="/"> <span class="arrow">β†</span>Home</a>
	
	<a href="/posts">Archive</a>
	<a href="/tags">Tags</a>
	<a href="/about">About</a>

	

	
	  <a class="button" href="https://seokbeomkim.github.io/index.xml">Subscribe</a>
	
</nav>


    <main class="main">
      

<section id="single">
    <h1 class="title">μ§€ν”Ό(Jiffies)</h1>

    <div class="tip">
        <time datetime="2019-05-26 10:38:40 &#43;0900 KST">May 26, 2019</time>
        <span class="split">
          Β·
        </span>
        <span>
          3251 words
        </span>
        <span class="split">
          Β·
        </span>
        <span>
          7 minute read
        </span>
    </div>

    
    
        
  
    <aside class="toc">
      <details>
          <summary>Table of Contents
          </summary>
          <div>
              <nav id="TableOfContents">
  <ul>
    <li><a href="#μ‹κ°„μ—-κ΄€λ ¨λ-ν•λ“μ›¨μ–΄">&lsquo;μ‹κ°„&rsquo;μ— κ΄€λ ¨λ ν•λ“μ›¨μ–΄</a></li>
    <li><a href="#μ»¤λ„-μ½”λ“-μ†-μ‹μ¤ν…-νƒ€μ΄λ¨Έ-μΈν„°λ½νΈ-ν•Έλ“¤λ¬">μ»¤λ„ μ½”λ“ μ† μ‹μ¤ν… νƒ€μ΄λ¨Έ μΈν„°λ½νΈ ν•Έλ“¤λ¬</a></li>
  </ul>
</nav>
          </div>
      </details>
    </aside>
  


    


    <div class="content">
      <!-- toc -->
<p>μ¤λλ§μ— μ§€ν”Όμ— λ€ν• ν¬μ¤ν…μ„ λ‹¤μ‹ μ‘μ„±ν•λ‹¤(λ€ν•™μƒ λ• μ»¤λ„ κ³µλ¶€λ¥Ό ν•
λ’¤λ΅ μ΄λ ‡κ² λ³„λ„λ΅ λ¬Έμ„λ¥Ό μ‘μ„±ν•λ” κ²ƒμ€ μ²μμΈ κ²ƒ κ°™λ‹¤). μ „μ—­ λ³€μμΈ
<code>jiffies</code>μ—λ” μ‹μ¤ν… μ‹μ‘ μ΄ν›„ λ°μƒν• μ§„λ™ νμ(tick)μ΄
μ €μ¥λλ‹¤. μ‹μ¤ν… μ‹μ‘ μ‹ μ»¤λ„μ€ μ΄ κ°’μ„ 0μΌλ΅ μ„¤μ •ν•κ³  νƒ€μ΄λ¨Έ
μΈν„°λ½νΈκ°€ λ°μƒν•  λ•λ§λ‹¤ 1μ”© μ¦κ°€μ‹ν‚¨λ‹¤. νƒ€μ΄λ¨Έ μΈν„°λ½νΈλ” μ΄λ‹Ή HZν
λ°μƒν•λ―€λ΅, μ΄λ‹Ή μ§€ν”Ό μλ” HZκ°€ λλ©°, μ΄μ— λ”°λΌ μ‹μ¤ν… κ°€λ™ μ‹κ°„μ€
<code>jiffies / HZ</code>(μ΄)κ°€ λλ‹¤.</p>
<p>μ»¤λ„μ€ λ²„κ·Έ μ‹λ³„μ„ μ„ν•΄ jiffies λ³€μμ μ¤λ²„ν”λ΅μ° ν„μƒμ΄ μμ£Ό μΌμ–΄λ‚κΈ°
μ„ν•΄ jiffies λ³€μλ¥Ό 0μ΄ μ•„λ‹ νΉλ³„ν• κ°’μΌλ΅ μ΄κΈ°ν™”ν•λ©° μ‹¤μ  jiffiesκ°’μ΄
ν•„μ”ν• κ²½μ°μ—λ” μ΄ μ°¨μ΄(offset)κ°’μ„ λΉΌμ•Ό ν•λ‹¤.</p>
<h1 id="μ§€ν”Ό-λΉ„κµλ¥Ό-μ„ν•-λ§¤ν¬λ΅">μ§€ν”Ό λΉ„κµλ¥Ό μ„ν• λ§¤ν¬λ΅ <a href="#%ec%a7%80%ed%94%bc-%eb%b9%84%ea%b5%90%eb%a5%bc-%ec%9c%84%ed%95%9c-%eb%a7%a4%ed%81%ac%eb%a1%9c" class="anchor">π”—</a></h1><p><code>jiffies</code>λ” <code>unsigned long</code> νƒ€μ…μΌλ΅ μ–Έμ  κ°€λ” μ¤λ²„ν”λ΅μ°κ°€ λ°μƒν•κ²
λλ‹¤. μ¤λ²„ν”λ΅μ°μ— λ€ν• λ‚΄μ©μ„ μ°Ύλ μ¤‘ μ¬λ―Έμλ” ν•¨μλ¥Ό λ°κ²¬ν–λ”λ° μ΄μ™€
κ΄€λ ¨ν•΄ μ κΉ μ„¤λ…ν•κ³ μ ν•λ‹¤.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#080">#define time_after(a,b)		\
</span></span></span><span style="display:flex;"><span><span style="color:#080">	(typecheck(unsigned long, a) &amp;&amp; \
</span></span></span><span style="display:flex;"><span><span style="color:#080">	 typecheck(unsigned long, b) &amp;&amp; \
</span></span></span><span style="display:flex;"><span><span style="color:#080">	 ((long)((b) - (a)) &lt; 0))
</span></span></span><span style="display:flex;"><span><span style="color:#080">#define time_before(a,b)	time_after(b,a)
</span></span></span><span style="display:flex;"><span><span style="color:#080"></span>
</span></span><span style="display:flex;"><span><span style="color:#080">#define time_after_eq(a,b)	\
</span></span></span><span style="display:flex;"><span><span style="color:#080">	(typecheck(unsigned long, a) &amp;&amp; \
</span></span></span><span style="display:flex;"><span><span style="color:#080">	 typecheck(unsigned long, b) &amp;&amp; \
</span></span></span><span style="display:flex;"><span><span style="color:#080">	 ((long)((a) - (b)) &gt;= 0))
</span></span></span><span style="display:flex;"><span><span style="color:#080">#define time_before_eq(a,b)	time_after_eq(b,a)
</span></span></span></code></pre></div><p>μμ „μ— μ§€ν”Ό(jiffies) λΉ„κµ λ§¤ν¬λ΅λ¥Ό λ³΄λ©΄μ„ μ΄κ² μ–΄λ–»κ² μ‘λ™ν•  μ μλ”μ§€
ν™•μ‹¤ν•κ² μ΄ν•΄ν•μ§€ λ»ν–μ—λ”λ° μ΄λ” <code>signed, unsignedμ™€ μ‹¤μ  λ°”μ΄νΈμ™€μ κ΄€κ³„</code>λ¥Ό λ‚΄κ°€ μ •ν™•ν•κ² μ΄ν•΄ν•μ§€ λ»ν•κ³  μμ—κΈ° λ•λ¬Έμ΄μ—λ‹¤.</p>
<p>λ§μ— λ“¤μ§€λ” μ•μ§€λ§, μ¤νƒ μ¤λ²„ν”λ΅μ°μ— λ§¤μ° μΉμ ν•κ² μ„¤λ…λμ–΄ μλ”
λ‹µλ³€μ΄ μμ—λ‹¤. unsignedμ™€ signedμ κ΄€κ³„λ¥Ό μμ„Έν•κ² λ‚νƒ€λƒλ”λ° μ•„λμ™€
κ°™μ΄ ν‘ν„ν•΄μ£Όμ—λ‹¤. μ•„λ κ·Έλ¦Ό(?)μ€ νΈμμƒ <code>unsigned long</code> λ€μ‹ 
<code>unsigned int</code>μ™€ <code>signed int</code>μ κ΄€κ³„λ¥Ό λ‚νƒ€λ‚Έ κ·Έλ¦Όμ΄λ‹¤.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>[0x0      -              -                  -               0xFFFF]
</span></span><span style="display:flex;"><span>[0x0                       0x7FFF][0x8000                   0xFFFF]
</span></span><span style="display:flex;"><span>[0                         32,767][-32,768                      -1]
</span></span></code></pre></div><p>integer unsigned ν•νƒλ” 0x0λ¶€ν„° 0xFFFF(4bytes, 2^32)κΉμ§€μ κ°’ λ²”μ„λ¥Ό
κ°€μ§€κ³  μκ³  signedλ” κ·Έ μ λ°μ„ κ°–κ³  μλ‹¤. μ΄ λ• μ¤‘μ”ν• μ μ€ signedμ
μ–‘μ λ²”μ„λ¥Ό μ΄κ³Όν•λ” μκ°„ -1λ΅ λλ” κ²ƒμ΄ μ•„λ‹λΌ μμ μµμ†κ°’μΌλ΅
λμ•„κ°„λ‹¤λ” μ μ΄λ‹¤. κ·Έλ¬λ―€λ΅ 0xFFFFλ” -1μ΄ λλ‹¤.</p>
<p>μ§€ν”Όλ¥Ό λΉ„κµν•λ” κ²½μ°λ΅ λ‹¤μ‹ λμ•„κ°€λ³΄μ. λΉ„κµν•  μ§€ν”Ό <code>t1, t2</code>μ— λ€ν•΄ 1)
λ¨λ‘ μ–‘μμΈ κ²½μ°, 2) λ¨λ‘ μμμΈ κ²½μ°, 3) ν•μ½μ€ μ–‘μ, ν•μ½μ€ μμμΈ
κ²½μ°λ¥Ό μƒκ°ν•΄ λ³Ό μ μλ‹¤.</p>
<p>μ΄λ¥Ό λΉ„κµν•κΈ° μ„ν•΄ μ•„λμ™€ κ°™μ΄ κ°„λ‹¨ν•κ² μ½”λ“λ¥Ό μ§λ³Έλ’¤ ν™•μΈν•΄λ³΄μ.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#080;font-style:italic">/* unsigned long μ¤λ²„ν”λ΅μ° κ²€μ‚¬ */</span>
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">unsigned</span> <span style="color:#0b0;font-weight:bold">long</span> t1 <span style="color:#666">=</span> <span style="color:#666">0</span>; <span style="color:#080;font-style:italic">// 0x0
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#0b0;font-weight:bold">unsigned</span> <span style="color:#0b0;font-weight:bold">long</span> t2 <span style="color:#666">=</span> <span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">unsigned</span> <span style="color:#0b0;font-weight:bold">long</span> t3 <span style="color:#666">=</span> (t1 <span style="color:#666">-</span> <span style="color:#666">1</span>); <span style="color:#080;font-style:italic">// 0xffffffff
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span><span style="color:#0b0;font-weight:bold">unsigned</span> <span style="color:#0b0;font-weight:bold">long</span> t4 <span style="color:#666">=</span> (t1 <span style="color:#666">-</span> <span style="color:#666">1</span>) <span style="color:#666">/</span> <span style="color:#666">2</span>; <span style="color:#080;font-style:italic">// μ¤‘κ°„ κ°’(signed μµλ€)
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>
</span></span><span style="display:flex;"><span>printf(<span style="color:#b44">&#34;(unsigned)t1 = %lu, t2 = %lu, t3 = %lu, t4 = %lu</span><span style="color:#b62;font-weight:bold">\n</span><span style="color:#b44">&#34;</span>, t1, t2, t3, t4);
</span></span><span style="display:flex;"><span>printf(<span style="color:#b44">&#34;(signed)t1 = %ld, t2 = %ld, t3 = %ld, t4 = %ld, t4+1 = %ld</span><span style="color:#b62;font-weight:bold">\n</span><span style="color:#b44">&#34;</span>, t1, t2, t3, t4, t4<span style="color:#666">+</span><span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">/* case 1. λΉ„κµ λ€μƒμ΄ λ¨λ‘ μ–‘μμΌ λ•  */</span>
</span></span><span style="display:flex;"><span>printf(<span style="color:#b44">&#34;case 1: t1 - t2 as long: %ld</span><span style="color:#b62;font-weight:bold">\n</span><span style="color:#b44">&#34;</span>, (<span style="color:#0b0;font-weight:bold">long</span>)t1 <span style="color:#666">-</span> (<span style="color:#0b0;font-weight:bold">long</span>)t2);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">/* case 2. λΉ„κµ λ€μƒμ΄ λ¨λ‘ μμμΌ λ• */</span>
</span></span><span style="display:flex;"><span>printf(<span style="color:#b44">&#34;case 2: (t4 + 1) - (t4 + 2): %ld</span><span style="color:#b62;font-weight:bold">\n</span><span style="color:#b44">&#34;</span>, (t4<span style="color:#666">+</span><span style="color:#666">1</span>) <span style="color:#666">-</span> (t4<span style="color:#666">+</span><span style="color:#666">2</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">/* case 3-1. λΉ„κµ λ€μƒμ΄ μ„λ΅ λ‹¤λ¥Έ λ¶€νΈμΌ λ• */</span>
</span></span><span style="display:flex;"><span>printf(<span style="color:#b44">&#34;case 3-1: t3 - t1 as long: %ld</span><span style="color:#b62;font-weight:bold">\n</span><span style="color:#b44">&#34;</span>, (<span style="color:#0b0;font-weight:bold">long</span>)((t3) <span style="color:#666">-</span> (t1)));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">/* case 3-2. λΉ„κµ λ€μƒμ΄ μ„λ΅ λ‹¤λ¥Έ λ¶€νΈμΌ λ• */</span>
</span></span><span style="display:flex;"><span>printf(<span style="color:#b44">&#34;case 3-2: t4 - (t4 + 1): %ld</span><span style="color:#b62;font-weight:bold">\n</span><span style="color:#b44">&#34;</span>, (<span style="color:#0b0;font-weight:bold">long</span>)t4 <span style="color:#666">-</span> (<span style="color:#0b0;font-weight:bold">long</span>)(t4 <span style="color:#666">+</span> <span style="color:#666">1</span>));
</span></span></code></pre></div><p>μ΄μ— λ€ν• μ¶λ ¥ κ²°κ³Όλ” λ‹¤μκ³Ό κ°™λ‹¤.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>(unsigned)t1 = 0, t2 = 1, t3 = 18446744073709551615, t4 = 9223372036854775807
</span></span><span style="display:flex;"><span>(signed)t1 = 0, t2 = 1, t3 = -1, t4 = 9223372036854775807, t4+1 = -9223372036854775808
</span></span><span style="display:flex;"><span>case 1: t1 - t2 as long: -1
</span></span><span style="display:flex;"><span>case 2: (t4 + 1) - (t4 + 2): -1
</span></span><span style="display:flex;"><span>case 3-1: t3 - t1 as long: -1
</span></span><span style="display:flex;"><span>case 3-2: t4 - (t4 + 1): -1
</span></span></code></pre></div><p>μ¦‰, μ•μ„κ°€λ” unsigned, signedμ νΉμ„± μƒ μ•μ„κ°€λ” ν¬μΈνΈμ— λ€ν•΄ signed
λ²”μ„ μ•μ—μ„ κ°’μ„ λΉ„κµν•λ©΄ κ·Έ κ²°κ³Ό λ²”μ„κ°€ μ–‘μ λλ” μμλ΅ λ‚μ¤κ² λλ‹¤.</p>
<h1 id="λ§¤ν¬λ΅-μ†-typecheck">λ§¤ν¬λ΅ μ† typecheck <a href="#%eb%a7%a4%ed%81%ac%eb%a1%9c-%ec%86%8d-typecheck" class="anchor">π”—</a></h1><p>μ—¬κΈ°μ„ μ‚¬μ©λ <code>typecheck</code> ν•¨μλ¥Ό μ κΉ μ‚΄ν΄λ³΄μ. typecheckλ” λ¬΄μ΅°κ±΄
μ°Έ(1) κ°’μ„ λ°ν™ν•λ” λ§¤ν¬λ΅ ν•¨μμ΄λ‹¤. κ·ΈλΌμ—λ„ μ‚¬μ©ν•λ” μ΄μ λ” μ»΄νμΌ
νƒ€μ„μ—μ„ μΈμλ΅ μ „λ‹¬ν• νƒ€μ…κ³Ό λ³€μμ νƒ€μ…μ„ μ„λ΅ λΉ„κµν•μ—¬ κ°™μ€μ§€
μ—¬λ¶€λ¥Ό λ‚νƒ€λ‚Ό μ μλ” μΌμΆ…μ νΈλ¦­μ„ μ‚¬μ©ν•κ³  μκΈ° λ•λ¬Έμ΄λ‹¤. (μ»¤λ„
ν•΄ν‚Ήμ„ μ‹μ‘ν•μ§€ μ–Όλ§λμ§€ μ•μ€ μ‹μ μ—μ„ μ¤λλ§μ— λκ»΄λ³΄λ” μ¦κ±°μ›€μ΄λ‹¤.)
μ•„λλ” typecheckλ¥Ό κµ¬ν„ν• μ½”λ“μ΄λ‹¤.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#080">#define typecheck(type,x) \
</span></span></span><span style="display:flex;"><span><span style="color:#080">({ type __dummy; \
</span></span></span><span style="display:flex;"><span><span style="color:#080">typeof(x) __dummy2; \
</span></span></span><span style="display:flex;"><span><span style="color:#080">(void)(&amp;__dummy == &amp;__dummy2); \
</span></span></span><span style="display:flex;"><span><span style="color:#080">1; \
</span></span></span><span style="display:flex;"><span><span style="color:#080">})
</span></span></span></code></pre></div><p>μ¬λ―Έμλ” κ²ƒμ€ λ°ν™κ°’μ€ ν•­μƒ 1μ΄μ§€λ§ λ°ν™ μ „μ— <code>(void)(&amp;__dummy == &amp;__dummy2);</code> λ¶€λ¶„μ„ ν†µν•΄ κ° λ³€μμ νƒ€μ…μΌλ΅ λ§λ“  ν¬μΈν„°κ°€ μΌμΉν•λ”μ§€λ¥Ό
κ²½κ³  λλ” μ—λ¬ λ©”μ„Έμ§€λ΅ μ¶λ ¥ν•λ‹¤. λ°νƒ€μ„ μ‹μ κ²°κ³Όλ¥Ό κΈ°λ€ν•λ” μ½”λ“κ°€
μ•„λ‹λΌ, μ»΄νμΌ μ‹μ κ²°κ³Όλ¥Ό κΈ°λ€ν•λ©° μ§  μ½”λ“μΈλ§νΌ μ»¨μ…‰ μμ²΄κ°€ μ •λ§
μ‹ μ„ ν•κ² λ‹¤κ°€μ™”λ‹¤.</p>
<p>μ΄λ¬ν• μ½”λ“λ” μ•„λμ™€ κ°™μ΄ μ»΄νμΌμ„ ν†µν•΄ μ¶λ ¥ κ°’μ„ κΈ°λ€ν•  μ
μλ‹¤. <code>unsigned long</code> νƒ€μ…μ€ <code>j1</code>μ λ³€μλ¥Ό <code>int</code>κ³Ό λΉ„κµν•λ”
κ²½μ°μ΄λ‹¤. μ΄λ¬ν• μμ λ¥Ό μ•„λ μ¤ν¬λ¦°μƒ·μ²λΌ <code>-Werror</code> μµμ…κ³Ό ν•¨κ»
μ»΄νμΌν•κ² λλ©΄ νƒ€μ… μ—λ¬λ¥Ό μ‚¬μ „μ— κ°μ§€ν•΄λ‚Ό μ μλ‹¤.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">int</span> a <span style="color:#666">=</span> <span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">unsigned</span> <span style="color:#0b0;font-weight:bold">long</span> j1 <span style="color:#666">=</span> <span style="color:#666">12345678</span>;
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">unsigned</span> <span style="color:#0b0;font-weight:bold">long</span> j2 <span style="color:#666">=</span> <span style="color:#666">23456789</span>;
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">if</span> (typecheck(<span style="color:#0b0;font-weight:bold">int</span>,a) <span style="color:#666">&amp;&amp;</span> typecheck(<span style="color:#0b0;font-weight:bold">int</span>, j1) <span style="color:#666">&amp;&amp;</span> typecheck(<span style="color:#0b0;font-weight:bold">unsigned</span> <span style="color:#0b0;font-weight:bold">long</span>, j2)) {
</span></span><span style="display:flex;"><span>    printf(<span style="color:#b44">&#34;a value is int and (j1, j2) is unsigned long</span><span style="color:#b62;font-weight:bold">\n</span><span style="color:#b44">&#34;</span>);
</span></span><span style="display:flex;"><span>} <span style="color:#a2f;font-weight:bold">else</span> {
</span></span><span style="display:flex;"><span>    printf(<span style="color:#b44">&#34;a value is not int</span><span style="color:#b62;font-weight:bold">\n</span><span style="color:#b44">&#34;</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><p class="markdown-image">
  <img src="/img/gcc_werror.png" alt="μ»΄νμΌ νƒ€μ„ μ—λ¬"  />
</p></p>
<h1 id="μ§€ν”Όjiffiesλ”-λ„κ°€-μ¦κ°€μ‹ν‚¤λ”κ°€">μ§€ν”Ό(jiffies)λ” λ„κ°€ μ¦κ°€μ‹ν‚¤λ”κ°€? <a href="#%ec%a7%80%ed%94%bcjiffies%eb%8a%94-%eb%88%84%ea%b0%80-%ec%a6%9d%ea%b0%80%ec%8b%9c%ed%82%a4%eb%8a%94%ea%b0%80" class="anchor">π”—</a></h1><p>μ•μ„, <code>&quot;μ§€ν”Ό(jiffies)μ—λ” μ‹μ¤ν… μ‹μ‘ μ΄ν›„ λ°μƒν• μ§„λ™ νμ(tick)κ°€ μ €μ¥λλ‹¤.&quot;</code>λΌκ³  λ§ν–λ‹¤. κ·Έλ ‡λ‹¤λ©΄ κ·Έλ¬ν• tickμ€ λ„κ°€ λ°μƒμ‹ν‚¬κΉ? μ΄λ¥Ό
μ„ν• κ²ƒμ΄ λ°”λ΅ μ‹μ¤ν… νƒ€μ΄λ¨Έμ΄λ‹¤.</p>
<p>μ‹κ°„ κΈ°λ΅μ„ μ„ν•΄μ„ λ¦¬λ…μ¤μ—μ„λ” RTC(Real Time Clock), μ‹μ¤ν… νƒ€μ΄λ¨Έλ¥Ό
μ΄μ©ν•λ‹¤.</p>
<h2 id="μ‹κ°„μ—-κ΄€λ ¨λ-ν•λ“μ›¨μ–΄">&lsquo;μ‹κ°„&rsquo;μ— κ΄€λ ¨λ ν•λ“μ›¨μ–΄ <a href="#%ec%8b%9c%ea%b0%84%ec%97%90-%ea%b4%80%eb%a0%a8%eb%90%9c-%ed%95%98%eb%93%9c%ec%9b%a8%ec%96%b4" class="anchor">π”—</a></h2><p>RTCλ” λ³΄ν†µ μ‹μ¤ν… κΈ°νμ— λ¶™μ–΄ μλ” μ›ν• λ°°ν„°λ¦¬λ¥Ό ν†µν•΄ μ‹μ¤ν…μ΄ κΊΌμ Έ
μλ” λ™μ•μ—λ„ μ‹κ°„μ„ κΈ°λ΅ν•λ©° μΌλ°μ μΈ PC μ•„ν‚¤ν…μ²μΈ κ²½μ° RTCμ™€ CMOSκ°€
ν†µν•©λμ–΄ μλ” κ²ƒμ„ ν™•μΈν•  μ μλ‹¤.<br>μ»¤λ„μ€ μ‹μ¤ν… μ‹μ‘ μ‹ RTCλ¥Ό μ½κ³ 
<code>xtime</code>λ³€μμ— μ €μ¥λλ” ν„μ¬ μ‹κ°„μ„ μ΄κΈ°ν™”ν•λ‹¤. λ³΄ν†µ μ»¤λ„μ€ μµμ΄
initμ—λ§ RTCλ¥Ό μ½μΌλ©° x86 μ‹μ¤ν…μ„ μ μ™Έν•κ³ λ” RTCλ¥Ό λ‹¤μ‹ μ½μ§€ μ•λ”λ‹¤.</p>
<p>μ‹μ¤ν… νƒ€μ΄λ¨Έλ” μ»¤λ„μ μ‹κ°„ κΈ°λ΅μ— μμ–΄ λ§¤μ° μ¤‘μ”ν• μ—­ν• μ„ ν•λ‹¤. ν„μ¬
μ‹κ°„μ„ μ΄κΈ°ν™”ν•  λ• μ‚¬μ©λλ” RTCμ™€λ” λ‹¬λ¦¬ μ‹μ¤ν… νƒ€μ΄λ¨Έλ” μ£ΌκΈ°μ μΌλ΅
μΈν„°λ½νΈλ¥Ό λ°μƒμ‹ν‚¨λ‹¤. κ·Έλ¦¬κ³  μ»¤λ„μ€ μ΄λ¬ν• νƒ€μ΄λ¨Έ μΈν„°λ½νΈμ— λ€ν•
μΈν„°λ½νΈ ν•Έλ“¤λ¬λ¥Ό λ‚΄λ¶€μ— κ°€μ§€κ³  μμ–΄ μ•„λμ™€ κ°™μ€ μ‘μ—…λ“¤μ„ μ²λ¦¬ν•λ‹¤.<br><br></p>
<ol>
<li>jiffies_64 λ° ν„μ¬ μ‹κ°„μ„ μ €μ¥ν•λ” xtime λ³€μμ— μ•μ „ν•κ² μ ‘κ·Όν•κΈ°
μ„ν•΄ xtime_lockμ„ μ–»λ”λ‹¤.</li>
<li>ν•„μ”μ— λ”°λΌ μ‹μ¤ν… νƒ€μ΄λ¨Έλ¥Ό ν™•μΈν•κ³  μ¬μ„¤μ •ν•λ‹¤.</li>
<li>κ°±μ‹ λ ν„μ¬ μ‹κ°„μ„ μ£ΌκΈ°μ μΌλ΅ μ‹¤μ‹κ°„ μ‹κ³„μ— λ°μν•λ‹¤.</li>
<li><strong>μ•„ν‚¤ν…μ² μΆ…μ†μ </strong> νƒ€μ΄λ¨Έ ν•¨μμΈ <code>tick_periodic()</code> ν•¨μλ¥Ό νΈμ¶ν•λ‹¤.</li>
</ol>
<h2 id="μ»¤λ„-μ½”λ“-μ†-μ‹μ¤ν…-νƒ€μ΄λ¨Έ-μΈν„°λ½νΈ-ν•Έλ“¤λ¬">μ»¤λ„ μ½”λ“ μ† μ‹μ¤ν… νƒ€μ΄λ¨Έ μΈν„°λ½νΈ ν•Έλ“¤λ¬ <a href="#%ec%bb%a4%eb%84%90-%ec%bd%94%eb%93%9c-%ec%86%8d-%ec%8b%9c%ec%8a%a4%ed%85%9c-%ed%83%80%ec%9d%b4%eb%a8%b8-%ec%9d%b8%ed%84%b0%eb%9f%bd%ed%8a%b8-%ed%95%b8%eb%93%a4%eb%9f%ac" class="anchor">π”—</a></h2><p>κ·Έλ ‡λ‹¤λ©΄, μ§μ ‘ νƒ€μ΄λ¨Έ μΈν„°λ½νΈ ν•Έλ“¤λ¬λ¥Ό λ”°λΌκ°€λ³΄μ. μ»¤λ„ λ¶„μ„ μ±…μ—λ”
μ•„ν‚¤ν…μ² μΆ…μ†μ μΈ λ¶€λ¶„μ€ μ‹μ¤ν… νƒ€μ΄λ¨Έμ μΈν„°λ½νΈ ν•Έλ“¤λ¬ ν•νƒλ΅ λμ–΄
μμΌλ©° νƒ€μ΄λ¨Έ μΈν„°λ½νΈκ°€ λ°μƒν–μ„ λ• μ‹¤ν–‰λλ‹¤κ³  λμ–΄ μλ‹¤. ν•μ§€λ§ μ‹¤μ 
μ»¤λ„(v4.20.x)μ—λ” <code>tick-common.h</code> μ•μ— ν•λ‚λ΅ ν†µν•©λμ–΄
μμ—λ‹¤. <code>tick-internal.h</code> ν—¤λ”νμΌμ—λ” <code>tick_set_periodic_handler</code>λΌλ”
ν•¨μκ°€ μ •μλμ–΄ μλ‹¤. νƒ€μ΄λ¨Έ μΈν„°λ½νΈμ— λ€ν• ν•Έλ“¤λ¬λ¥Ό λ“±λ΅ν•λ”
ν•¨μλ΅μ„ <code>clock_event_device</code>(μ‹μ¤ν… νƒ€μ΄λ¨Έ μ¥μΉ) λ””λ°”μ΄μ¤μ μ΄λ²¤νΈ
ν•Έλ“¤λ¬λ΅ λ“±λ΅ν•λ” λ¶€λ¶„μ΄λ‹¤.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#080;font-style:italic">/* Set the periodic handler in non broadcast mode */</span>
</span></span><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">static</span> <span style="color:#a2f;font-weight:bold">inline</span> <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">tick_set_periodic_handler</span>(<span style="color:#a2f;font-weight:bold">struct</span> <span style="color:#00f">clock_event_device</span> <span style="color:#666">*</span>dev, <span style="color:#0b0;font-weight:bold">int</span> broadcast)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	dev<span style="color:#666">-&gt;</span>event_handler <span style="color:#666">=</span> tick_handle_periodic;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>μ΄μ , <code>tick_handle_periodic()</code> μΈν„°λ½νΈ ν•Έλ“¤λ¬λ¥Ό μ‚΄ν΄λ³΄μ.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#080;font-style:italic">/*
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"> * Event handler for periodic ticks
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">tick_handle_periodic</span>(<span style="color:#a2f;font-weight:bold">struct</span> <span style="color:#00f">clock_event_device</span> <span style="color:#666">*</span>dev)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#0b0;font-weight:bold">int</span> cpu <span style="color:#666">=</span> smp_processor_id();
</span></span><span style="display:flex;"><span>	ktime_t next <span style="color:#666">=</span> dev<span style="color:#666">-&gt;</span>next_event;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	tick_periodic(cpu);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#080">#if defined(CONFIG_HIGH_RES_TIMERS) || defined(CONFIG_NO_HZ_COMMON)
</span></span></span><span style="display:flex;"><span><span style="color:#080"></span>	<span style="color:#080;font-style:italic">/*
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">	 * The cpu might have transitioned to HIGHRES or NOHZ mode via
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">	 * update_process_times() -&gt; run_local_timers() -&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">	 * hrtimer_run_queues().
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">	 */</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a2f;font-weight:bold">if</span> (dev<span style="color:#666">-&gt;</span>event_handler <span style="color:#666">!=</span> tick_handle_periodic)
</span></span><span style="display:flex;"><span>		<span style="color:#a2f;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span><span style="color:#080">#endif
</span></span></span><span style="display:flex;"><span><span style="color:#080"></span>
</span></span><span style="display:flex;"><span>	<span style="color:#a2f;font-weight:bold">if</span> (<span style="color:#666">!</span>clockevent_state_oneshot(dev))
</span></span><span style="display:flex;"><span>		<span style="color:#a2f;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#a2f;font-weight:bold">for</span> (;;) {
</span></span><span style="display:flex;"><span>		<span style="color:#080;font-style:italic">/*
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">		 * Setup the next period for devices, which do not have
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">		 * periodic mode:
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">		 */</span>
</span></span><span style="display:flex;"><span>		next <span style="color:#666">=</span> ktime_add(next, tick_period);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#a2f;font-weight:bold">if</span> (<span style="color:#666">!</span>clockevents_program_event(dev, next, <span style="color:#a2f">false</span>))
</span></span><span style="display:flex;"><span>			<span style="color:#a2f;font-weight:bold">return</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#080;font-style:italic">/*
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">		 * Have to be careful here. If we&#39;re in oneshot mode,
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">		 * before we call tick_periodic() in a loop, we need
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">		 * to be sure we&#39;re using a real hardware clocksource.
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">		 * Otherwise we could get trapped in an infinite
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">		 * loop, as the tick_periodic() increments jiffies,
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">		 * which then will increment time, possibly causing
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">		 * the loop to trigger again and again.
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic">		 */</span>
</span></span><span style="display:flex;"><span>		<span style="color:#a2f;font-weight:bold">if</span> (timekeeping_valid_for_hres())
</span></span><span style="display:flex;"><span>			tick_periodic(cpu);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>μ±…μ—μ„λ” <em>&ldquo;μ•„ν‚¤ν…μ² μΆ…μ†μ μΈ λ¶€λ¶„μ€ μ‹μ¤ν… νƒ€μ΄λ¨Έμ μΈν„°λ½νΈ ν•Έλ“¤λ¬
ν•νƒλ΅ λμ–΄ μμΌλ©°, νƒ€μ΄λ¨Έ μΈν„°λ½νΈκ°€ λ°μƒν–μ„ λ• μ‹¤ν–‰λλ‹¤.&rdquo;</em> λΌκ³ 
λμ–΄ μμΌλ‚, μ‹¤μ  <code>tick_periodic</code> μμ²΄λ” μ•„ν‚¤ν…μ² μΆ…μ† μ½”λ“κ°€ λ°κ²¬λμ§€
μ•μ•λ‹¤. λ€μ‹  cpu μ•„μ΄λ””λ¥Ό μ–»μ–΄μ¤λ” λ¶€λ¶„μ— λ€ν•΄ μ•„λμ™€ κ°™μ€ μ½”λ“λ¥Ό
λ°κ²¬ν•  μ μμ—λ‹¤.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#080">#ifdef CONFIG_DEBUG_PREEMPT
</span></span></span><span style="display:flex;"><span><span style="color:#080"></span>  <span style="color:#a2f;font-weight:bold">extern</span> <span style="color:#0b0;font-weight:bold">unsigned</span> <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#00a000">debug_smp_processor_id</span>(<span style="color:#0b0;font-weight:bold">void</span>);
</span></span><span style="display:flex;"><span><span style="color:#080"># define smp_processor_id() debug_smp_processor_id()
</span></span></span><span style="display:flex;"><span><span style="color:#080">#else
</span></span></span><span style="display:flex;"><span><span style="color:#080"># define smp_processor_id() raw_smp_processor_id()
</span></span></span><span style="display:flex;"><span><span style="color:#080">#endif
</span></span></span></code></pre></div><p>κ·Έλ¦¬κ³  <code>raw_smp_processor_id()</code>μ— λ€ν•΄μ„λ” μ•„ν‚¤ν…μ² λ³„λ΅ μΆ…μ†μ μΈ
μ½”λ“κ°€ λ“¤μ–΄κ°€ μλ” κ²ƒμ„ ν™•μΈν•  μ μλ‹¤. ν• μλ΅, x86 μ½”λ“λ¥Ό μ‚΄ν΄λ³΄λ©΄
μ•„λμ™€ κ°™μ΄ μ •μλλ‹¤.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#080">#define raw_smp_processor_id() (this_cpu_read(cpu_number))
</span></span></span></code></pre></div><p>μ—¬κΈ°μ„ λ” κΉκ² λ“¤μ–΄κ°€λ” κ²ƒμ€ κ·Έλ§λ‘κ³  λ‹¤μ‹ μ›μ μΌλ΅ λμ•„κ°€, μ‹μ¤ν…
νƒ€μ΄λ¨Έ μΈν„°λ½νΈ ν•Έλ“¤λ¬μ—μ„ SMP(Symmetric Multiprocessing)μ— κ΄€λ ¨,
μ•„ν‚¤ν…μ²μ— μΆ…μ†λ μ½”λ“κ°€ μ‹¤ν–‰λλ‹¤λ” κ²ƒμ„ νμ•…ν•μ€λ‹¤. μ΄μ 
<code>tick_periodic()</code>μ„ μ‚΄ν΄λ³΄μ.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#a2f;font-weight:bold">static</span> <span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">tick_periodic</span>(<span style="color:#0b0;font-weight:bold">int</span> cpu)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#a2f;font-weight:bold">if</span> (tick_do_timer_cpu <span style="color:#666">==</span> cpu) {
</span></span><span style="display:flex;"><span>		write_seqlock(<span style="color:#666">&amp;</span>jiffies_lock);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#080;font-style:italic">/* Keep track of the next tick event */</span>
</span></span><span style="display:flex;"><span>		tick_next_period <span style="color:#666">=</span> ktime_add(tick_next_period, tick_period);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		do_timer(<span style="color:#666">1</span>);
</span></span><span style="display:flex;"><span>		write_sequnlock(<span style="color:#666">&amp;</span>jiffies_lock);
</span></span><span style="display:flex;"><span>		update_wall_time(); <span style="color:#080;font-style:italic">// μ§„λ™μ κ²½κ³Όμ— λ§μ¶° ν„μ¬ μ‹κ°„μ„ κ°±μ‹ ν•λ‹¤.
</span></span></span><span style="display:flex;"><span><span style="color:#080;font-style:italic"></span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	update_process_times(user_mode(get_irq_regs()));
</span></span><span style="display:flex;"><span>	profile_tick(CPU_PROFILING);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>μ΄ ν•¨μμ—μ„ λμ—¬κ²¨λ³Ό λ¶€λ¶„μ€ <code>do_timer()</code>μ™€ <code>update_process_times()</code>
λ¶€λ¶„μ΄λ‹¤. <code>do_timer()</code> ν•¨μλ” μ‹¤μ  μ§€ν”Όκ°’μ„ μ¦κ°€μ‹ν‚¤λ” μ‘μ—…μ„ λ‹΄λ‹Ήν•λ©°
ν•΄λ‹Ή μ½”λ“λ” μ•„λμ™€ κ°™λ‹¤. μ»¤λ„μ€ μ „μ ν•¨μλ¥Ό ν†µν•΄ μ§€λΉ„λ¥Ό λ°μƒν• ν‹±λ§νΌ
μ¦κ°€μ‹ν‚¤κ³  ν›„μλ¥Ό ν†µν•΄ μ‹μ¤ν…μ ν‰κ·  λ΅λ“ ν†µκ³„λ¥Ό κ°±μ‹ ν•λ‹¤.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">do_timer</span>(<span style="color:#0b0;font-weight:bold">unsigned</span> <span style="color:#0b0;font-weight:bold">long</span> ticks)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	jiffies_64 <span style="color:#666">+=</span> ticks;
</span></span><span style="display:flex;"><span>	calc_global_load(ticks);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#0b0;font-weight:bold">void</span> <span style="color:#00a000">update_process_times</span>(<span style="color:#0b0;font-weight:bold">int</span> user_tick)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#a2f;font-weight:bold">struct</span> <span style="color:#00f">task_struct</span> <span style="color:#666">*</span>p <span style="color:#666">=</span> current;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#080;font-style:italic">/* Note: this timer irq context must be accounted for as well. */</span>
</span></span><span style="display:flex;"><span>	account_process_tick(p, user_tick);
</span></span><span style="display:flex;"><span>	run_local_timers();
</span></span><span style="display:flex;"><span>	rcu_check_callbacks(user_tick);
</span></span><span style="display:flex;"><span><span style="color:#080">#ifdef CONFIG_IRQ_WORK
</span></span></span><span style="display:flex;"><span><span style="color:#080"></span>	<span style="color:#a2f;font-weight:bold">if</span> (in_irq())
</span></span><span style="display:flex;"><span>		irq_work_tick();
</span></span><span style="display:flex;"><span><span style="color:#080">#endif
</span></span></span><span style="display:flex;"><span><span style="color:#080"></span>	scheduler_tick();
</span></span><span style="display:flex;"><span>	<span style="color:#a2f;font-weight:bold">if</span> (IS_ENABLED(CONFIG_POSIX_TIMERS))
</span></span><span style="display:flex;"><span>		run_posix_cpu_timers(p);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>update_process_times</code>λ” <code>run_local_timers()</code>λ¥Ό ν†µν•΄ λ΅μ»¬ νƒ€μ΄λ¨Έ, μ¦‰
softirqλ¥Ό λ°μƒμ‹μΌ μ‹κ°„μ΄ λ§λ£λ νƒ€μ΄λ¨Έλ¥Ό μ‹¤ν–‰ν•λ‹¤.</p>
<h1 id="μ¶μ²">μ¶μ² <a href="#%ec%b6%9c%ec%b2%98" class="anchor">π”—</a></h1><ul>
<li><a href="https://stackoverflow.com/questions/8206762/how-does-linux-handle-overflow-in-jiffies" target="_blank" rel="noopener">how does linux handle overflow in
jiffies</a></li>
</ul>

    </div>

    
        <div class="tags">
            
                <a href="https://seokbeomkim.github.io/tags/jiffies">jiffies</a>
            
        </div>
    
    
    

</section>


    </main>
    
    <footer id="footer">
    

    <div class="copyright">
    
        Copyright - Sukbeom Kim
    
    </div>

    
</footer>



  </body>
</html>
