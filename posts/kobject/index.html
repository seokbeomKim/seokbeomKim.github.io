<!DOCTYPE html>
<html lang="en-us">
  <head>
    <title>Kobject | Sukbeom Kim</title>

    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">    
<meta name="viewport" content="width=device-width,minimum-scale=1">
<meta name="description" content="kobjects, ktypes, ksets ğŸ”—ë””ë°”ì´ìŠ¤ íŠ¸ë¦¬ë¥¼ ì‚´í´ë³´ë‹¤ kobject ì— ëŒ€í•œ ë‚´ìš©ì´ ì–¸ê¸‰ë˜ê¸° ì‹œì‘í–ˆë‹¤. ë‹¨ìˆœí•œ ê°ì²´ê°€ ì•„ë‹ˆë¼ íŠ¹ìˆ˜í•œ ëª©ì ìœ¼ë¡œ ì‚¬ìš©ë  ê²ƒì´ë¼ ì˜ˆìƒë˜ì–´ ê´€ë ¨ ë‚´ìš©ì„ ì°¾ì•„ë³´ì•˜ë‹¤. 61 struct">
<meta name="generator" content="Hugo 0.121.2">


  <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">


<link rel="stylesheet" href="/css/style.css">


  
    
    <link rel="stylesheet" href="/css/img.css">
  

  
    
    <link rel="stylesheet" href="/css/noto_sans_kr.css">
  

  
    
    <link rel="stylesheet" href="/css/nanumgothic.css">
  


<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />

 
    
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'G-Y7VW74D2P3', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>




  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js" integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>




  </head>

  <body>
    <nav class="navigation">
	
		<a href="/"> <span class="arrow">â†</span>Home</a>
	
	<a href="/posts">Archive</a>
	<a href="/tags">Tags</a>
	<a href="/about">About</a>

	

	
	  <a class="button" href="/index.xml">Subscribe</a>
	
</nav>


    <main class="main">
      

<section id="single">
    <h1 class="title">Kobject</h1>

    <div class="tip">
        <time datetime="2020-01-28 22:25:50 &#43;0900 KST">Jan 28, 2020</time>
        <span class="split">
          Â·
        </span>
        <span>
          863 words
        </span>
        <span class="split">
          Â·
        </span>
        <span>
          2 minute read
        </span>
    </div>

    
    
        
  


    


    <div class="content">
      <h1 id="kobjects-ktypes-ksets">kobjects, ktypes, ksets <a href="#kobjects-ktypes-ksets" class="anchor">ğŸ”—</a></h1><p>ë””ë°”ì´ìŠ¤ íŠ¸ë¦¬ë¥¼ ì‚´í´ë³´ë‹¤ <code>kobject</code> ì— ëŒ€í•œ ë‚´ìš©ì´ ì–¸ê¸‰ë˜ê¸° ì‹œì‘í–ˆë‹¤. ë‹¨ìˆœí•œ ê°ì²´ê°€ ì•„ë‹ˆë¼ íŠ¹ìˆ˜í•œ ëª©ì ìœ¼ë¡œ ì‚¬ìš©ë  ê²ƒì´ë¼ ì˜ˆìƒë˜ì–´ ê´€ë ¨ ë‚´ìš©ì„ ì°¾ì•„ë³´ì•˜ë‹¤.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span> <span style="color:#666">61</span> <span style="color:#a2f;font-weight:bold">struct</span> <span style="color:#00f">kobject</span> {
</span></span><span style="display:flex;"><span> <span style="color:#666">62</span>         <span style="color:#a2f;font-weight:bold">const</span> <span style="color:#0b0;font-weight:bold">char</span>              <span style="color:#666">*</span>name;
</span></span><span style="display:flex;"><span> <span style="color:#666">63</span>         <span style="color:#a2f;font-weight:bold">struct</span> <span style="color:#00f">list_head</span>        entry;
</span></span><span style="display:flex;"><span> <span style="color:#666">64</span>         <span style="color:#a2f;font-weight:bold">struct</span> <span style="color:#00f">kobject</span>          <span style="color:#666">*</span>parent;
</span></span><span style="display:flex;"><span> <span style="color:#666">65</span>         <span style="color:#a2f;font-weight:bold">struct</span> <span style="color:#00f">kset</span>             <span style="color:#666">*</span>kset;
</span></span><span style="display:flex;"><span> <span style="color:#666">66</span>         <span style="color:#a2f;font-weight:bold">struct</span> <span style="color:#00f">kobj_type</span>        <span style="color:#666">*</span>ktype;
</span></span><span style="display:flex;"><span> <span style="color:#666">67</span>         <span style="color:#a2f;font-weight:bold">struct</span> <span style="color:#00f">kernfs_node</span>      <span style="color:#666">*</span>sd;
</span></span><span style="display:flex;"><span> <span style="color:#666">68</span>         <span style="color:#a2f;font-weight:bold">struct</span> <span style="color:#00f">kref</span>             kref;
</span></span><span style="display:flex;"><span> <span style="color:#666">69</span> <span style="">#</span>ifdef CONFIG_DEBUG_KOBJECT_RELEASE
</span></span><span style="display:flex;"><span> <span style="color:#666">70</span>         <span style="color:#a2f;font-weight:bold">struct</span> <span style="color:#00f">delayed_work</span>     release;
</span></span><span style="display:flex;"><span> <span style="color:#666">71</span> <span style="">#</span>endif
</span></span><span style="display:flex;"><span> <span style="color:#666">72</span>         <span style="color:#0b0;font-weight:bold">unsigned</span> <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#a0a000">state_initialized</span>:<span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span> <span style="color:#666">73</span>         <span style="color:#0b0;font-weight:bold">unsigned</span> <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#a0a000">state_in_sysfs</span>:<span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span> <span style="color:#666">74</span>         <span style="color:#0b0;font-weight:bold">unsigned</span> <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#a0a000">state_add_uevent_sent</span>:<span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span> <span style="color:#666">75</span>         <span style="color:#0b0;font-weight:bold">unsigned</span> <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#a0a000">state_remove_uevent_sent</span>:<span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span> <span style="color:#666">76</span>         <span style="color:#0b0;font-weight:bold">unsigned</span> <span style="color:#0b0;font-weight:bold">int</span> <span style="color:#a0a000">uevent_suppress</span>:<span style="color:#666">1</span>;
</span></span><span style="display:flex;"><span> <span style="color:#666">77</span> };
</span></span></code></pre></div><p>ì»¤ë„ ë¬¸ì„œ(<a href="https://www.kernel.org/doc/Documentation/kobject.txt" target="_blank" rel="noopener">https://www.kernel.org/doc/Documentation/kobject.txt</a>)ì— ë”°ë¥´ë©´ <code>kobjects</code>ì™€ ë”ë¶ˆì–´ <code>ksets</code>, <code>ktypes</code> ì— ëŒ€í•´ ì•„ë˜ì™€ ê°™ì´ ê¸°ìˆ í•˜ê³  ìˆë‹¤.</p>
<blockquote>
<p>A kobject is an object of type struct kobject.  Kobjects have a name
and a reference count.  A kobject also has a parent pointer (allowing
objects to be arranged into hierarchies), a specific type, and,
usually, a representation in the sysfs virtual filesystem.</p>
</blockquote>
<blockquote>
<p>Kobjects are generally not interesting on their own; instead, they are
usually embedded within some other structure which contains the stuff
the code is really interested in</p>
</blockquote>
<blockquote>
<p>A ktype is the type of object that embeds a kobject.  Every structure
that embeds a kobject needs a corresponding ktype.  The ktype controls
what happens to the kobject when it is created and destroyed.</p>
</blockquote>
<blockquote>
<p>A kset is a group of kobjects.  These kobjects can be of the same ktype
or belong to different ktypes.  The kset is the basic container type for
collections of kobjects. Ksets contain their own kobjects, but you can
safely ignore that implementation detail as the kset core code handles
this kobject automatically.</p>
</blockquote>
<p>KobjectëŠ” ì´ë¦„ê³¼ ì°¸ì¡°íšŸìˆ˜ë¥¼ ê°€ì§€ê³  ìˆëŠ” ê°ì²´ë¡œì„œ ìê¸° ìì‹ ì— ëŒ€í•´ ê´€ì‹¬ì„ ê°€ì§€ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë‹¤ë¥¸ êµ¬ì¡°ì²´ì— embedded ë˜ì–´ ê´€ë ¨ ì½”ë“œì—ì„œ í•„ìš”ë¡œ í•˜ëŠ” ë‚´ìš©ë“¤ì„ ì €ì¥í•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•œë‹¤. kobjects ìì²´ëŠ” ê³„ì¸µ êµ¬ì¡°ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆë„ë¡ ë¶€ëª¨ í¬ì¸í„°ë¥¼ ê°€ì§€ë©° íŠ¹ì • ìœ í˜•ì´ë‚˜ sysfs ë“±ì—ë„ ì‚¬ìš©ëœë‹¤.</p>
<p>ktypeì€ kobjectì— ëŒ€í•œ ë„ë©”ì¸(ì •ì˜ì—­)ì´ë¼ ìƒê°í•˜ë©´ ì´í•´í•˜ê¸° ì‰½ë‹¤. ì„œë¡œ ë‹¤ë¥¸ ê°’ë“¤ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆëŠ” ë„ë©”ì¸ì€ ê·¸ ê°’ì— ëŒ€í•œ íƒ€ì… ì‹œìŠ¤í…œìœ¼ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆìœ¼ë©° ì´ëŸ¬í•œ íƒ€ì…ì‹œìŠ¤í…œì— ëŒ€í•œ ê°œë…ì´ ì—¬ê¸°ì—ë„ ê·¸ëŒ€ë¡œ ë¬»ì–´ë‚˜ëŠ” ê²ƒì„ ë„¤ì´ë°ì„ í†µí•´ ë‹¨ë²ˆì— ì•Œ ìˆ˜ ìˆë‹¤.</p>
<p>ksetì€ kobject, ì¦‰ ë‹¨ìˆœí•œ ì§‘í•©ì´ë‹¤. ë•Œë¬¸ì— ì„œë¡œ ë‹¤ë¥¸ ktypeë“¤ì„ ê°€ì§€ê³  ìˆì„ ìˆ˜ë„ ìˆê³  ëª¨ë‘ ê°™ì€ ktypeë“¤ë¡œ êµ¬ì„±í•  ìˆ˜ë„ ìˆë‹¤.</p>
<p>ì •ë¦¬í•˜ë©´, kobjects, ksets, ktypes ë“¤ì„ ì´ìš©í•˜ì—¬ ì»¤ë„ ë‚´ì—ì„œ ê°ì²´ë¥¼ ì´ìš©í•œ ì‘ì€ íƒ€ì…ì‹œìŠ¤í…œì´ë¼ ìƒê°í•  ìˆ˜ ìˆë‹¤. Functional Programming ì—ì„œ ì–˜ê¸°í•˜ëŠ” íƒ€ì…ì‹œìŠ¤í…œì„ ì´í•´í•˜ê³  ìˆë‹¤ë©´ ê°œë…ì ìœ¼ë¡œ ë‹¨ë²ˆì— ì´í•´ê°€ ê°€ëŠ¥í•  ê²ƒì´ë¼ ìƒê°ëœë‹¤. ê°œë…ì ìœ¼ë¡œ íƒ€ì…ì‹œìŠ¤í…œì„ êµ¬ì„±í•˜ê³  ì´ë¥¼ sysfs ì™€ ê°™ì€ íŒŒì¼ ì‹œìŠ¤í…œì— ì ìš©í•˜ì—¬, í•´ë‹¹ ì„œë¸Œì‹œìŠ¤í…œ(?)ì´ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ë°ì´í„°ë“¤ì— ëŒ€í•œ íƒ€ì…ì‹œìŠ¤í…œì„ ì¶”ìƒí™”í•˜ì—¬ ì¼ê´€ì„± ìˆê²Œ êµ¬í˜„í•˜ê¸° ìœ„í•´ ê³ ë¯¼í•œ í”ì ë“¤ì„ ì—¿ë³¼ ìˆ˜ ìˆë‹¤.</p>
<p>ì•Œë©´ ì•Œìˆ˜ë¡, ëª¨ë¥´ëŠ” ê²Œ ì •ë§ ë§ë‹¤.</p>
<h1 id="ì¶œì²˜">ì¶œì²˜ <a href="#%ec%b6%9c%ec%b2%98" class="anchor">ğŸ”—</a></h1><ul>
<li><a href="https://sonseungha.tistory.com/236" target="_blank" rel="noopener">https://sonseungha.tistory.com/236</a></li>
</ul>

    </div>

    
        <div class="tags">
            
                <a href="/tags/kobject">kobject</a>
            
        </div>
    
    
    

</section>


    </main>
    
    <footer id="footer">
    

    <div class="copyright">
    
        Copyright - Sukbeom Kim
    
    </div>

    
</footer>



  </body>
</html>
