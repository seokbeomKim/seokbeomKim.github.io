<!DOCTYPE html>
<html lang="en-us">
  <head>
    <title>λΌμ¦λ² λ¦¬νμ΄ λ„¤νΈμ›ν¬ λ¶€ν… μ„¤μ • | seokbeomkim.dev</title>

    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">    
<meta name="viewport" content="width=device-width,minimum-scale=1">
<meta name="description" content="λ„¤νΈμ›ν¬ λ¶€ν… ν™κ²½ μ„¤μ • π”—κΈ°λ³Έμ μΌλ΅ λΌμ¦λ² λ¦¬νμ΄μ κ²½μ° SD μΉ΄λ“μ— λ¶€νΈμ— ν•„μ”ν• νν‹°μ…λ“¤μ„ μ €μ¥ν•λ‹¤. μ΄ λ•λ¬Έμ— μ»¤λ„μ΄λ‚ λ£¨νΈνμΌμ‹μ¤ν…μ μμ •μ‚¬ν•­μ΄ μλ” κ²½μ°">
<meta name="generator" content="Hugo 0.92.2" />


  <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">


<link rel="stylesheet" href="/css/style.css">



<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8323334830421355"
     crossorigin="anonymous"></script>

 
    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'G-Y7VW74D2P3', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>








  </head>

  <body>
    <nav class="navigation">
	
		<a href="/"> <span class="arrow">β†</span>Home</a>
	
	<a href="/posts">Archive</a>
	<a href="/tags">Tags</a>
	<a href="/about">About</a>

	

	
	  <a class="button" href="https://seokbeomkim.github.io/index.xml">RSS Feed</a>
	
</nav>


    <main class="main">
      

<section id="single">
    <h1 class="title">λΌμ¦λ² λ¦¬νμ΄ λ„¤νΈμ›ν¬ λ¶€ν… μ„¤μ •</h1>

    <div class="tip">
        <time datetime="2023-04-15 10:21:58 &#43;0900 KST">Apr 15, 2023</time>
        <span class="split">
          Β·
        </span>
        <span>
          2299 words
        </span>
        <span class="split">
          Β·
        </span>
        <span>
          5 minute read
        </span>
    </div>

    
    


    <div class="content">
      <h2 id="λ„¤νΈμ›ν¬-λ¶€ν…-ν™κ²½-μ„¤μ •">λ„¤νΈμ›ν¬ λ¶€ν… ν™κ²½ μ„¤μ • <a href="#%eb%84%a4%ed%8a%b8%ec%9b%8c%ed%81%ac-%eb%b6%80%ed%8c%85-%ed%99%98%ea%b2%bd-%ec%84%a4%ec%a0%95" class="anchor">π”—</a></h2><p>κΈ°λ³Έμ μΌλ΅ λΌμ¦λ² λ¦¬νμ΄μ κ²½μ° SD μΉ΄λ“μ— λ¶€νΈμ— ν•„μ”ν• νν‹°μ…λ“¤μ„ μ €μ¥ν•λ‹¤. μ΄
λ•λ¬Έμ— μ»¤λ„μ΄λ‚ λ£¨νΈνμΌμ‹μ¤ν…μ μμ •μ‚¬ν•­μ΄ μλ” κ²½μ° λ§¤λ² νΈμ¤νΈμ—μ„ SD μΉ΄λ“μ—
κ΄€λ ¨λ νμΌμ„ λ„£μ–΄μ¤μ•Ό ν•λ”λ° μ΄κ²ƒλ§νΌ μ •λ§ λ²κ±°λ΅μ΄ κ²ƒμ΄ μ—†λ‹¤.</p>
<p>ν•„μλ” λΌμ¦λ² λ¦¬νμ΄4λ¥Ό κΈ°μ¤€μΌλ΅ ν™κ²½μ„ κµ¬μ„±ν•μ€λ‹¤. λ³Έ νμ΄μ§€μ—μ„λ” TFTPμ™€
λΌμ¦λ² λ¦¬νμ΄μ PXE Bootμ„ μ§€μ›ν•λ” κΈ°λ³Έ λ¶€νΈλ΅λ”λ¥Ό μ΄μ©ν•΄ μ»¤λ„ μ΄λ―Έμ§€λ¥Ό λ΅λ“ν•λ”
λ°©λ²•κ³Ό NFSλ¥Ό μ΄μ©ν•μ—¬ λ£¨νΈνμΌμ‹μ¤ν…μ„ λ΅λ“ν•λ” λ°©λ²•μ„ ν•¨κ» κΈ°μ ν•λ‹¤.</p>
<h3 id="λ„¤νΈμ›ν¬-κµ¬μ„±">λ„¤νΈμ›ν¬ κµ¬μ„± <a href="#%eb%84%a4%ed%8a%b8%ec%9b%8c%ed%81%ac-%ea%b5%ac%ec%84%b1" class="anchor">π”—</a></h3><p>μΌλ°μ μΌλ΅ λ¶€νΈλ΅λ”μ—μ„ TFTP ν΄λΌμ΄μ–ΈνΈλ¥Ό ν•¨κ» μ κ³µν•λ‹¤. U-Boot λ¶€νΈλ΅λ”μ™€
λ§μ°¬κ°€μ§€λ΅ λΌμ¦λ² λ¦¬νμ΄μ κΈ°λ³Έ λ¶€νΈλ΅λ” λν• λ‚΄λ¶€μ μΌλ΅ TFTP ν΄λΌμ΄μ–ΈνΈλ¥Ό
ν¬ν•¨ν•κ³  μμ–΄ λ¶€νΈλ΅λ”μ— κ΄€λ ¨λ μ„¤μ •λ§ μ¶”κ°€ν•΄μ£Όλ©΄ λλ‹¤. NFSμ κ²½μ° <code>mount</code>
λ…λ Ήμ–΄λ¥Ό ν†µν•΄ ν•μ§€λ§ κ·Έ μ „μ— λ„¤νΈμ›ν¬ κµ¬μ„±μ— λ€ν•΄ ν• λ² μƒκ°ν•΄λ΄μ•Ό ν•λ‹¤.</p>
<p><p class="markdown-image">
  <img src="/img/raspberry-pi-netboot.drawio.png" alt="img"  />
</p></p>
<ol>
<li>TFTP μ„λ²„λ” Host PC (Windows) μ tftpdλ¥Ό μ΄μ©ν•λ‹¤. WSL2μ—μ„ tftp μ„λ²„λ¥Ό
κµ¬μ„±ν•΄λ„ λμ§€λ§ ν•„μλ” μλ„μ°μ¦ νΈμ¤νΈ PCμ—μ„ <code>tftpd64</code> λΌλ” ν”„λ΅κ·Έλ¨μ„
μ΄μ©ν•κΈ°λ΅ ν–λ‹¤.</li>
<li>NFS μ„λ²„λ” WSL2μ— κµ¬μ„±ν•κ³  λΌμ¦λ² λ¦¬νμ΄μ—μ„ WSL2μ— μ ‘κ·Όν•  μ μλ„λ΅ NFSμ—μ„
μ‚¬μ©ν•λ” ν¬νΈμ— ν•ν•μ—¬ ν¬νΈν¬μ›λ”©μ„ ν•λ‹¤.</li>
</ol>
<h3 id="tftp-μ΄μ©ν•μ—¬-μ»¤λ„-μ΄λ―Έμ§€-λ΅λ“">TFTP μ΄μ©ν•μ—¬ μ»¤λ„ μ΄λ―Έμ§€ λ΅λ“ <a href="#tftp-%ec%9d%b4%ec%9a%a9%ed%95%98%ec%97%ac-%ec%bb%a4%eb%84%90-%ec%9d%b4%eb%af%b8%ec%a7%80-%eb%a1%9c%eb%93%9c" class="anchor">π”—</a></h3><p>TFTPλ¥Ό μ΄μ©ν•΄ μ»¤λ„ μ΄λ―Έμ§€λ¥Ό λ΅λ“ν•κΈ° μ„ν•΄μ„λ” μ•„λμ μ‘μ—… μμ„κ°€ ν•„μ”ν•λ‹¤. 1λ²
λ‚΄μ©μ€ <code>Raspberry Pi Imager</code> λΌλ” κ³µμ‹ μ ν‹Έλ¦¬ν‹°κ°€ μκ³  κµ³μ΄ μ„¤λ…μ„ ν•μ§€ μ•μ•„λ„
λκΈ° λ•λ¬Έμ— λ”°λ΅ μ„¤λ…ν•μ§€λ” μ•κ² λ‹¤.</p>
<ol>
<li>SD μΉ΄λ“ μ΄μ©ν•΄ κΈ°λ³Έ λ¶€νΈ</li>
<li>λΌμ¦λ² λ¦¬νμ΄μ λ¶€νΈλ΅λ” μ„¤μ • λ³€κ²½</li>
<li>SD μΉ΄λ“μ λ¶€νΈ νν‹°μ… λ³µμ‚¬</li>
<li>tftp64 μ΄μ©ν•΄ λ¶€νΈ</li>
</ol>
<h4 id="2-λ¶€νΈλ΅λ”-μ„¤μ •-λ³€κ²½">2. λ¶€νΈλ΅λ” μ„¤μ • λ³€κ²½ <a href="#2-%eb%b6%80%ed%8a%b8%eb%a1%9c%eb%8d%94-%ec%84%a4%ec%a0%95-%eb%b3%80%ea%b2%bd" class="anchor">π”—</a></h4><p>μ•„λμ— μ„¤λ…ν•λ” λ¶€νΈλ΅λ” μ„¤μ • λ³€κ²½ λ°©λ²•μ€
<a href="https://metebalci.com/blog/cardless-rpi4/" target="_blank" rel="noopener">https://metebalci.com/blog/cardless-rpi4/</a> μ— λ”°λ¥Έ κ²ƒμ΄λ‹¤. μ°Ύμ•„λ³Έ ν¬μ¤ν… μ¤‘μ—
κ°€μ¥ μ •λ¦¬κ°€ μ λμ–΄ μλ‹¤. ν¬μ¤ν… λ‚΄ μ£Όμ” λ‚΄μ©μ„ μ •λ¦¬ν•λ©΄, μ•„λμ μμ„λ΅ λ¶€νΈλ΅λ”
μ„¤μ •μ„ μ—…λ°μ΄νΈ ν•λ‹¤.</p>
<ol>
<li>ν„μ¬ λ¶€νΈλ΅λ” λ²„μ „ ν™•μΈ</li>
<li>pieeprom.bin λ°”μ΄λ„λ¦¬λ΅λ¶€ν„° μ„¤μ • μ¶”μ¶</li>
<li>μ„¤μ • νμΌ λ‚΄ TFTP μ •λ³΄ μ¶”κ°€</li>
<li>λ³€κ²½ν• μ„¤μ • νμΌμ„ ν¬ν•¨ν• pieeprom.bin μ¬μƒμ„±</li>
<li>μ¬μƒμ„±ν• pieeprom.binμΌλ΅ λ¶€νΈλ΅λ” μ—…λ°μ΄νΈ</li>
</ol>
<p>λ¨Όμ € λ¶€νΈλ΅λ” λ²„μ „μ„ ν™•μΈν•΄λ³΄μ. <code>vcgencmd bootloader_version</code> λ…λ Ήμ–΄λ¥Ό μ΄μ©ν•λ©΄
μ•„λμ™€ κ°™μ΄ ν„μ¬ λ¶€νΈν• ν™κ²½ κΈ°μ¤€μΌλ΅ μ‚¬μ© μ¤‘μΈ λ¶€νΈλ΅λ” λ²„μ „μ„ ν™•μΈν•  μ μλ‹¤.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">pi@raspberrypi:~$ vcgencmd bootloader_version
2023/01/11 17:40:52
version 8ba17717fbcedd4c3b6d4bce7e50c7af4155cba9 <span style="color:#666">(</span>release<span style="color:#666">)</span>
timestamp <span style="color:#666">1673458852</span>
update-time <span style="color:#666">1681394003</span>
capabilities 0x0000007f
</code></pre></div><p>λ²„μ „μ„ ν™•μΈν–μΌλ‹ ν•΄λ‹Ή λ‚ μ§μ— λ§λ” pieepromμ„ ν™ λ””λ ‰ν† λ¦¬λ΅ λ³µμ‚¬ν•κ³  λ°”μ΄λ„λ¦¬
νμΌλ΅λ¶€ν„° μ„¤μ •μ„ μ¶”μ¶ν•λ‹¤. λ§μ•½ rpi-eeprom-configκ°€ μ—†λ‹¤λ©΄ <code>rpi-eeprom</code> ν¨ν‚¤μ§€λ¥Ό
μ„¤μΉν•΄μ¤μ•Ό ν•λ‹¤.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">$ <span style="color:#a2f">pwd</span>
/home/pi
$ cp /lib/firmware/raspberrypi/bootloader/default/pieeprom-2023-01-11.bin pieeprom.bin
$ rpi-eeprom-config pieeprom.bin &gt; config.txt
</code></pre></div><p>μ¶μ²μ—μ„λ” <code>BOOT_ORDER</code> λ¥Ό κ°•μ΅°ν•κ³  μλ”λ°, TFTP ν™κ²½μΌλ΅ λ¶€ν…ν•΄μ•Ό ν•λ―€λ΅ μ•μ„
λ„¤νΈμ›ν¬ κµ¬μ„±μ—μ„ κ³ λ ¤ν–λ κ²ƒκ³Ό κ°™μ΄ config.txt νμΌμ„ λ³€κ²½ν•΄μ¤€λ‹¤.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">[all]
BOOT_UART=1
WAKE_ON_GPIO=1
POWER_OFF_ON_HALT=0
TFTP_IP=192.168.0.5
CLIENT_IP=192.168.0.4
SUBNET=255.255.255.0
GATEWAY=
TFTP_PREFIX=0
BOOT_ORDER=0x21
TFTP_FILE_TIMEOUT=30000
</code></pre></div><p>μ„¤μ •μ΄ λλ‚¬λ‹¤. μ΄μ  μ„¤μ •νμΌμ΄ λ‹΄κΈ΄ λ°”μ΄λ„λ¦¬ νμΌμ„ μƒμ„±ν•κ³  ν•΄λ‹Ή νμΌλ΅ μ—…λ°μ΄νΈ ν•΄μ£Όμ.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ rpi-eeprom-config --out pieeprom-out.bin --config config.txt pieeprom.bin
$ sudo rpi-eeprom-update -d -f ./pieeprom-out.bin
$ sudo reboot
</code></pre></div><h4 id="3-sd-μΉ΄λ“-λ¶€νΈ-νν‹°μ…-λ³µμ‚¬">3. SD μΉ΄λ“ λ¶€νΈ νν‹°μ… λ³µμ‚¬ <a href="#3-sd-%ec%b9%b4%eb%93%9c-%eb%b6%80%ed%8a%b8-%ed%8c%8c%ed%8b%b0%ec%85%98-%eb%b3%b5%ec%82%ac" class="anchor">π”—</a></h4><p>μ΄μ  λ¶€νΈλ΅λ” μ„¤μ •μ€ λλ‚¬μΌλ‹ SD μΉ΄λ“μ boot partitionμ„ Host PCμ— μ €μ¥ν•λ‹¤.
ν•„μλ” κ·Έλƒ¥ κ·€μ°®μ•„μ„ tftpd64 λ””λ ‰ν† λ¦¬(<code>C:\Program Files\Tftpd64\rpi_boot</code>) μ•μ—
λ„£μ–΄λ†“μ•λ‹¤.</p>
<p><p class="markdown-image">
  <img src="/img/rpi_boot.png" alt="img"  />
</p></p>
<h4 id="4-tftp64-μ΄μ©ν•΄-tftpboot">4. tftp64 μ΄μ©ν•΄ tftpboot <a href="#4-tftp64-%ec%9d%b4%ec%9a%a9%ed%95%b4-tftpboot" class="anchor">π”—</a></h4><p>μ΄μ  tftp64 ν”„λ΅κ·Έλ¨μ—μ„ λ””λ ‰ν† λ¦¬λ¥Ό μ„¤μ •ν•΄μ£Όκ³  λΌμ¦λ² λ¦¬νμ΄λ¥Ό λ¶€ν…ν•΄μ£Όλ©΄ μ»¤λ„
λ΅λ“κΉμ§€λ” μ •μƒμ μΌλ΅ λλ” κ²ƒμ„ ν™•μΈν•  μ μλ‹¤. tftp64 ν”„λ΅κ·Έλ¨μ€ μ•„λ λ§ν¬μ—μ„
λ‹¤μ΄λ΅λ“ λ°›μ„ μ μλ‹¤.</p>
<ul>
<li><a href="https://bitbucket.org/phjounin/tftpd64/downloads/" target="_blank" rel="noopener">https://bitbucket.org/phjounin/tftpd64/downloads/</a></li>
</ul>
<p>μ΄μ  tftpλ¥Ό μ΄μ©ν• μ»¤λ„ μ΄λ―Έμ§€ λ΅λ“ μ¤€λΉ„λ” λμ΄ λ‚¬λ‹¤. SD μΉ΄λ“λ¥Ό λΉΌκ³  μ „μ›μ„
μΈκ°€ν•λ©΄ μ»¤λ„ λ΅λ“κΉμ§€λ” μ„±κ³µμ μΌλ΅ λλ” κ²ƒμ„ ν™•μΈν•  μ μλ‹¤.</p>
<h3 id="nfs-μ΄μ©ν•μ—¬-λ£¨νΈνμΌμ‹μ¤ν…-λ΅λ“">NFS μ΄μ©ν•μ—¬ λ£¨νΈνμΌμ‹μ¤ν… λ΅λ“ <a href="#nfs-%ec%9d%b4%ec%9a%a9%ed%95%98%ec%97%ac-%eb%a3%a8%ed%8a%b8%ed%8c%8c%ec%9d%bc%ec%8b%9c%ec%8a%a4%ed%85%9c-%eb%a1%9c%eb%93%9c" class="anchor">π”—</a></h3><p>μ»¤λ„ μ΄λ―Έμ§€λ¥Ό μ„±κ³µμ μΌλ΅ λ΅λ“ν•λ‹¤κ³  ν•΄λ„ λ£¨νΈνμΌμ‹μ¤ν… λ΅λ“κ°€ λμ§€ μ•μΌλ‹
λ¶€ν…μ΄ λ  λ¦¬κ°€ μ—†λ‹¤. ν•„μλ” WSL2(Ubuntu)μ— NFS μ„λ²„λ¥Ό κµ¬μ„±ν•΄μ„ rootfs λ§μ΄νΈ
μ‹μ μ— NFSλ¥Ό λ§μ΄νΈν•λ„λ΅ κµ¬μ„±ν•μ€λ‹¤.</p>
<p>μ‘μ—… μμ„λ” μ•„λμ™€ κ°™μΌλ©°, λ°λΉ„μ• κ³„μ—΄μ μ°λ¶„ν¬ WSL κΈ°μ¤€μΌλ΅ μ„¤λ…ν•κ² λ‹¤.</p>
<ol>
<li>λΌμ¦λ² λ¦¬νμ΄ μ΄λ―Έμ§€ νμΌ (*.img) λ§μ΄νΈ λ° λ³µμ‚¬</li>
<li>WSL2 λ‚΄ nfs-server μ„¤μΉ λ° μ„¤μ •</li>
<li>nfs-server μ„λΉ„μ¤ μ‹¤ν–‰</li>
<li>Windows λ‚΄ ν¬νΈ ν¬μ›λ”© λ° λ°©ν™”λ²½ μ„¤μ •</li>
</ol>
<h4 id="λΌμ¦λ² λ¦¬νμ΄-μ΄λ―Έμ§€-λ‚΄-rootfs-νμΌ-λ³µμ‚¬">λΌμ¦λ² λ¦¬νμ΄ μ΄λ―Έμ§€ λ‚΄ rootfs νμΌ λ³µμ‚¬ <a href="#%eb%9d%bc%ec%a6%88%eb%b2%a0%eb%a6%ac%ed%8c%8c%ec%9d%b4-%ec%9d%b4%eb%af%b8%ec%a7%80-%eb%82%b4-rootfs-%ed%8c%8c%ec%9d%bc-%eb%b3%b5%ec%82%ac" class="anchor">π”—</a></h4><p>λ¨Όμ €, λΌμ¦λ² λ¦¬νμ΄ κ³µμ‹ μ‚¬μ΄νΈμ—μ„ os μ΄λ―Έμ§€ νμΌμ„ λ‹¤μ΄λ΅λ“ λ°›λ”λ‹¤. λ³ΈμΈμ€ ν„μ¬
κΈ°μ¤€μΌλ΅ lite versionμΈ <code>2023-02-21-raspios-bullseye-arm64-lite.img</code> νμΌμ„
λ‹¤μ΄λ΅λ“ λ°›μ•λ‹¤. κ·Έ ν›„ μ•„λμ™€ κ°™μ΄ λ§μ΄νΈλ¥Ό ν•κ³  λ΅μ»¬ λ””λ ‰ν† λ¦¬μ— λ‚΄μ©μ„
λ³µμ‚¬ν•λ‹¤.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo mount -o loop,offset<span style="color:#666">=</span><span style="color:#666">272629760</span> ./2023-02-21-raspios-bullseye-arm
64-lite.img /mnt/
$ mkdir /rpi
$ cp -ra /mnt/* /rpi
</code></pre></div><h4 id="nfs-server-μ„¤μΉ-λ°-μ„¤μ •">NFS-Server μ„¤μΉ λ° μ„¤μ • <a href="#nfs-server-%ec%84%a4%ec%b9%98-%eb%b0%8f-%ec%84%a4%ec%a0%95" class="anchor">π”—</a></h4><p>μ΄μ  rootfsλ” μ¤€λΉ„λμ—μΌλ‹ nfs-serverλ¥Ό μ„¤μΉν•  μ°¨λ΅€μ΄λ‹¤. ν•„μλ” λΌμ¦λ² λ¦¬νμ΄λ¥Ό
μ μ™Έν• λ‚λ¨Έμ§€ λ””λ ‰ν† λ¦¬λ” ν•„μ”ν•μ§€ μ•κΈ° λ•λ¬Έμ— rootdirμ„ /rpiλ΅ μ„¤μ •ν•μ€λ‹¤. μ‚¬μ©
ν™κ²½μ— λ”°λΌ μ μ ν•κ² μ„¤μ •ν•΄μ¤€λ‹¤.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo apt install nfs-kernel-server
$ sudo vi /etc/nfs.conf
    
<span style="color:#080;font-style:italic"># μ•„λμ™€ κ°™μ΄ [exports] μ„¤μ •</span>
<span style="color:#666">[</span>exports<span style="color:#666">]</span>
<span style="color:#b8860b">rootdir</span><span style="color:#666">=</span>/rpi
    
<span style="color:#080;font-style:italic"># ...</span>
</code></pre></div><p>μ΄μ  <code>/etc/exports</code> νμΌμ„ μ•„λμ™€ κ°™μ΄ μ„¤μ •ν•΄μ¤€λ‹¤. <code>insecure</code> μµμ…μ„ λ„£μ–΄μ£Όμ—λ”λ°
λ³ΈμΈμ κ²½μ° μ΄ μ„¤μ •μ„ μ μ™Έν•λ©΄ νμΌ νΌλ―Έμ…μ΄ λ³΄μ΄μ§€ μ•μ•„ ν•¨κ» λ„£μ–΄μ£Όμ—λ‹¤.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo vi /etc/exports
<span style="color:#080;font-style:italic"># ...</span>
/       *<span style="color:#666">(</span>rw,sync,no_root_squash,insecure<span style="color:#666">)</span>
</code></pre></div><h4 id="nfs-server-μ„λΉ„μ¤-μ‹¤ν–‰">nfs-server μ„λΉ„μ¤ μ‹¤ν–‰ <a href="#nfs-server-%ec%84%9c%eb%b9%84%ec%8a%a4-%ec%8b%a4%ed%96%89" class="anchor">π”—</a></h4><p>μ΄μ  μ„λΉ„μ¤λ¥Ό μ‹¤ν–‰ν•κ³  <code>exportfs</code> λ¥Ό μ—…λ°μ΄νΈ ν•΄μ¤€λ‹¤.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo service nfs-server restart
$ sudo <span style="color:#a2f">export</span> -arv
</code></pre></div><p>ν• κ°€μ§€ λ°κ²¬ν• λ¬Έμ λ” μλ„μ°μ¦μ—μ„ 2049 ν¬νΈκ°€ ν¬νΈν¬μ›λ”©μ΄ λμ–΄ μμ„ κ²½μ° port
binding μ—λ¬λ΅ μΈν•΄ μ„λΉ„μ¤ μ‹¤ν–‰ μ—λ¬κ°€ μƒκΈ΄λ‹¤λ” μ μ΄λ‹¤. λ°λ“μ‹ μλ„μ°μ¦μ—μ„
ν¬νΈν¬μ›λ”© λμ–΄ μλ” ν¬νΈ μ¤‘μ— nfs κ΄€λ ¨ ν¬νΈκ°€ μ—†λ”μ§€ ν™•μΈν•κ³  μ„λΉ„μ¤λ¥Ό
μ‹¤ν–‰ν•λ‹¤.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">PS C:\Users\chaox&gt; netsh interface portproxy show all
    
Listen on ipv4:             Connect to ipv4:
    
Address         Port        Address         Port
--------------- ----------  --------------- ----------
0.0.0.0         3000        172.29.124.79   3000
0.0.0.0         2049        172.29.124.79   2049 &lt;- λ§μ•½μ— μ΄ λ¶€λ¶„μ΄ μλ‹¤λ©΄ μ—λ¬κ°€ λ°μƒν•λ‹¤.
</code></pre></div><p>ν¬νΈ ν¬μ›λ”© μ κ±°μ‹μ—λ” μ•„λ λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•λ‹¤.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">&gt; netsh interface portproxy del v4tov4 listenport=2049 listenaddress=0.0.0.0
</code></pre></div><h4 id="ν¬νΈ-ν¬μ›λ”©-λ°-λ°©ν™”λ²½-μ„¤μ •">ν¬νΈ ν¬μ›λ”© λ° λ°©ν™”λ²½ μ„¤μ • <a href="#%ed%8f%ac%ed%8a%b8-%ed%8f%ac%ec%9b%8c%eb%94%a9-%eb%b0%8f-%eb%b0%a9%ed%99%94%eb%b2%bd-%ec%84%a4%ec%a0%95" class="anchor">π”—</a></h4><p>WSL2μ—μ„ μ„λΉ„μ¤κΉμ§€ μ •μƒμ μΌλ΅ μ‹¤ν–‰λμ—λ‹¤λ©΄ μλ„μ°μ¦μ—μ„ μ•„λμ™€ κ°™μ΄
ν¬νΈν¬μ›λ”©μ„ ν•΄μ¤€λ‹¤. κ·Έλ¦¬κ³  μ •μƒμ μΌλ΅ 2049 ν¬νΈλ΅ ν¬νΈν¬μ›λ”©μ΄ λμ–΄ μλ”μ§€
ν™•μΈν•λ‹¤. connectaddressλ” <code>wsl hostname -I</code> λ΅ ν™•μΈν• μ•„μ΄ν”Ό μ£Όμ†λ¥Ό λ„£μ–΄μ¤€λ‹¤.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">&gt; netsh interface portproxy add v4tov4 listenport=2049 listenaddress=0.0.0.0 connectport=2049 connectaddress=172.29.124.79
    
&gt; netsh interface portproxy show all
    
Listen on ipv4:             Connect to ipv4:
    
Address         Port        Address         Port
--------------- ----------  --------------- ----------
0.0.0.0         3000        172.29.124.79   3000
0.0.0.0         2049        172.29.124.79   2049
</code></pre></div><p>μ΄μ  μλ„μ°μ¦μ <code>Windows Defender Firewall with Advanced Security</code> λ¥Ό μ—΄μ–΄μ„
Inbound Rulesμ™€ Outbound Rules κ°κ° ν¬νΈ 2049μ— λ€ν•΄ ν—μ©ν•λ„λ΅ μ„¤μ •ν•λ‹¤.</p>
<h4 id="λ§λ¬΄λ¦¬">λ§λ¬΄λ¦¬ <a href="#%eb%a7%88%eb%ac%b4%eb%a6%ac" class="anchor">π”—</a></h4><p>μ΄μ  λ§μ§€λ§‰μΌλ΅ μ•μ„ λ³µμ‚¬ν•΄λ‘” κ²½λ΅ λ‚΄ etc/fstab μ„ μ•„λμ™€ κ°™μ΄ μμ •ν•΄μ¤€λ‹¤.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo vi /rpi/etc/fstab
<span style="color:#080;font-style:italic"># ...</span>
proc            /proc           proc    defaults          <span style="color:#666">0</span>       <span style="color:#666">0</span>
192.168.0.5:/   /               nfs     defaults,_netdav  <span style="color:#666">0</span>       <span style="color:#666">1</span>
</code></pre></div><p>λ§μ§€λ§‰μΌλ΅ λ¶€νΈ νν‹°μ…μΌλ΅ λ³µμ‚¬ν• <code>cmdline.txt</code> μ— NFSλ¥Ό λ΅λ“ν•  μ μλ„λ΅ λ³€κ²½ν•΄μ£Όμ.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">console=serial0,115200 console=tty1 root=/dev/nfs nfsroot=192.168.0.5:/,nfsvers=4 ip=192.168.0.4 rw elevator=deadline fsck.repair=yes rootwait rootfstype=nfs
</code></pre></div><h2 id="μ¶μ²">μ¶μ² <a href="#%ec%b6%9c%ec%b2%98" class="anchor">π”—</a></h2><ul>
<li><a href="https://metebalci.com/blog/cardless-rpi4/" target="_blank" rel="noopener">https://metebalci.com/blog/cardless-rpi4/</a></li>
</ul>

    </div>

    
        <div class="tags">
            
                <a href="https://seokbeomkim.github.io/tags/rpi">rpi</a>
            
                <a href="https://seokbeomkim.github.io/tags/nfs">nfs</a>
            
                <a href="https://seokbeomkim.github.io/tags/tftp">tftp</a>
            
        </div>
    
    
    

</section>


    </main>
    
    <footer id="footer">
    
        <div id="social">


    <a class="symbol" href="https://github.com/seokbeomKim" rel="me" target="_blank">
        
        <svg fill="#bbbbbb" width="28" height="28"  viewBox="0 0 72 72" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    
    <title>Github</title>
    <desc>Created with Sketch.</desc>
    <defs></defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="Social-Icons---Rounded-Black" transform="translate(-264.000000, -939.000000)">
            <g id="Github" transform="translate(264.000000, 939.000000)">
                <path d="M8,72 L64,72 C68.418278,72 72,68.418278 72,64 L72,8 C72,3.581722 68.418278,-8.11624501e-16 64,0 L8,0 C3.581722,8.11624501e-16 -5.41083001e-16,3.581722 0,8 L0,64 C5.41083001e-16,68.418278 3.581722,72 8,72 Z" id="Rounded" fill="#bbbbbb"></path>
                <path d="M35.9985,13 C22.746,13 12,23.7870921 12,37.096644 C12,47.7406712 18.876,56.7718301 28.4145,59.9584121 C29.6145,60.1797862 30.0525,59.4358488 30.0525,58.7973276 C30.0525,58.2250681 30.0315,56.7100863 30.0195,54.6996482 C23.343,56.1558981 21.9345,51.4693938 21.9345,51.4693938 C20.844,48.6864054 19.2705,47.9454799 19.2705,47.9454799 C17.091,46.4500754 19.4355,46.4801943 19.4355,46.4801943 C21.843,46.6503662 23.1105,48.9634994 23.1105,48.9634994 C25.2525,52.6455377 28.728,51.5823398 30.096,50.9649018 C30.3135,49.4077535 30.9345,48.3460615 31.62,47.7436831 C26.2905,47.1352808 20.688,45.0691228 20.688,35.8361671 C20.688,33.2052792 21.6225,31.0547881 23.1585,29.3696344 C22.911,28.7597262 22.0875,26.3110578 23.3925,22.9934585 C23.3925,22.9934585 25.4085,22.3459017 29.9925,25.4632101 C31.908,24.9285993 33.96,24.6620468 36.0015,24.6515052 C38.04,24.6620468 40.0935,24.9285993 42.0105,25.4632101 C46.5915,22.3459017 48.603,22.9934585 48.603,22.9934585 C49.9125,26.3110578 49.089,28.7597262 48.8415,29.3696344 C50.3805,31.0547881 51.309,33.2052792 51.309,35.8361671 C51.309,45.0917119 45.6975,47.1292571 40.3515,47.7256117 C41.2125,48.4695491 41.9805,49.9393525 41.9805,52.1877301 C41.9805,55.4089489 41.9505,58.0067059 41.9505,58.7973276 C41.9505,59.4418726 42.3825,60.1918338 43.6005,59.9554002 C53.13,56.7627944 60,47.7376593 60,37.096644 C60,23.7870921 49.254,13 35.9985,13" fill="#FFFFFF"></path>
            </g>
        </g>
    </g>
</svg>
    </a>


</div>

    

    <div class="copyright">
    
        Copyright - κΉ€μ„λ²” (Sukbeom Kim)
    
    </div>

    
      <div class="powerby">
        Powered by <a href='http://www.gohugo.io/'>Hugo</a> Theme By <a href='https://github.com/nodejh/hugo-theme-mini'>nodejh</a>
      </div>
    
</footer>



  </body>
</html>
